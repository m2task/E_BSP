<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>デッキ一覧</title>
    <link rel="stylesheet" href="card_cropper.css"> <!-- スタイルを共有 -->
    <link rel="stylesheet" href="navbar.css">
    <style>
        /* index.html固有のスタイル */
        #deck-list-container {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        #deck-list ul {
            list-style: none;
            padding: 0;
        }
        #deck-list li {
            background-color: #e9e9e9;
            margin-bottom: 8px;
            padding: 10px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        #deck-list li:hover {
            background-color: #dcdcdc;
        }
        #deck-list li button {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        #deck-list li .battle-button {
            background-color: #6c757d;
        }
        #deck-list li .battle-button:hover {
            background-color: #5a6268;
        }
        #deck-list li button:last-child {
            background-color: #dc3545;
            margin-left: auto;
        }
        #deck-list li button:last-child:hover {
            background-color: #c82333;
        }
        #selected-deck-display {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        #selected-deck-cards {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <nav>
        <ul>
            <li><a href="#" id="show-cropper-btn">カード切り取り</a></li>
            <li><a href="#" id="show-deck-list-btn">デッキ一覧</a></li>
            <li><a href="use.html">使い方</a></li>
        </ul>
    </nav>

    <!-- カード切り取りセクション -->
    <div id="cropper-section">
        <h1>カード一括切り取りツール</h1>
        <div class="controls" id="grid-controls">
            <label for="rows">行数 (縦):</label>
            <input type="number" id="rows" value="4" min="1">
            <label for="cols">列数 (横):</label>
            <input type="number" id="cols" value="5" min="1">
            <label for="imageLoader">画像ファイルを選択:</label>
            <input type="file" id="imageLoader" accept="image/*">
        </div>
        <div class="controls" id="gap-controls">
            <label>カードを左上の枠に合わせたら数値を少しずつ変えて調節してください 左右の間隔:</label>
            <button id="gapH-decrease">←</button>
            <span id="gapH-value" style="display: inline-block; width: 40px; text-align: center; font-weight: bold;">10</span>
            <button id="gapH-increase">→</button>
            <label style="margin-left: 20px;">上下の間隔 (px):</label>
            <button id="gapV-decrease">↑</button>
            <span id="gapV-value" style="display: inline-block; width: 40px; text-align: center; font-weight: bold;">20</span>
            <button id="gapV-increase">↓</button>
        </div>
        <div class="actions" id="action-buttons">
            <button id="crop-button">切り取り実行</button>
            <button id="zoom-out-button">-</button>
            <button id="zoom-in-button">+</button>
        </div>
        <div id="cropper-container">
            <div id="image-container">
                <img id="sourceImage" src="" alt="アップロードされた画像">
            </div>
            <div id="grid-handles-container"></div>
            <div id="overlay-mask"></div>
        </div>
    </div>

    <!-- デッキ一覧セクション -->
    <div id="deck-list-section">
        <h1>保存済みデッキ一覧</h1>
        <div id="deck-list-container">
            <h2>チェックボックスに☑をするとデッキの一番左上が契約カードになります。</h2>
            <ul id="deck-list">
                <!-- デッキ名がここに表示されます -->
            </ul>
        </div>
    </div>

    <!-- デッキ編集エリア -->
    <div class="deck-editing-area">
        <div class="save-load-deck-controls">
            <h3>デッキの保存・読み込み</h3>
            <input type="text" id="deckNameInput" placeholder="デッキ名を入力">
            <button id="saveDeckAsButton">名前を付けて保存</button>
            <button id="overwriteSaveButton">上書き保存</button>
        </div>
        <div class="deck-header-controls">
            <h2>現在の編集デッキ (<span id="total-card-count">0</span>枚)</h2>
            <div class="add-card-by-name-controls">
                <h3>名前でカードを追加</h3>
                <input type="text" id="cardNameInput" placeholder="カード名を入力">
                <button id="addCardByNameButton">カード追加</button>
            </div>
        </div>
        <div id="deck-editor-container"></div>
    </div>

    <script src="src/indexedDB.js"></script>
    <script src="index.js"></script>
</body>
</html>