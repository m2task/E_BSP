<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>カード切り取りツール v2</title>
    <link rel="stylesheet" href="card_cropper.css">
    <link rel="stylesheet" href="navbar.css">
</head>
<body>
    <nav>
        <ul>
            <li><a href="card_cropper.html">切り取り</a></li>
            <li><a href="index.html">デッキ一覧</a></li>
            <li><a href="use.html">使い方</a></li>
        </ul>
    </nav>
    <h1>カード一括切り取りツール (v2: プロトタイプ追従方式)</h1>
    <div class="controls" id="grid-controls">
        <label for="rows">行数 (縦):</label>
        <input type="number" id="rows" value="4" min="1">
        <label for="cols">列数 (横):</label>
        <input type="number" id="cols" value="5" min="1">
        <label for="imageLoader">画像ファイルを選択:</label>
        <input type="file" id="imageLoader" accept="image/*">
    </div>

    <div class="controls" id="gap-controls">
        <label>カードを左上の枠に合わせたら数値を少しずつ変えて調節してください 左右の間隔:</label>
        <button id="gapH-decrease">←</button>
        <span id="gapH-value" style="display: inline-block; width: 40px; text-align: center; font-weight: bold;">10</span>
        <button id="gapH-increase">→</button>
        <label style="margin-left: 20px;">上下の間隔 (px):</label>
        <button id="gapV-decrease">↑</button>
        <span id="gapV-value" style="display: inline-block; width: 40px; text-align: center; font-weight: bold;">20</span>
        <button id="gapV-increase">↓</button>
    </div>

    <div class="actions" id="action-buttons">
        <button id="crop-button">切り取り実行</button>
        <button id="zoom-out-button">-</button>
        <button id="zoom-in-button">+</button>
    </div>

    <div id="cropper-container">
        <div id="image-container">
            <img id="sourceImage" src="" alt="アップロードされた画像">
        </div>
        <div id="grid-handles-container"></div>
        <div id="overlay-mask"></div>
    </div>

    <div class="save-load-deck-controls hidden">
        <h3>名前を付けてデッキを保存</h3>
        <input type="text" id="deckNameInput" placeholder="デッキ名を入力">
        <button id="saveDeckAsButton">名前を付けて保存</button>
    </div>

    <div class="deck-header-controls hidden">
        <h2 id="deck-editor-heading">デッキ編集エリア (<span id="total-card-count">0</span>枚)</h2>
        <div class="add-card-by-name-controls">
            <h3>名前でカードを追加</h3>
            <input type="text" id="cardNameInput" placeholder="カード名を入力">
            <button id="addCardByNameButton">カード追加</button>
        </div>
    </div>
    <div id="deck-editor-container" class="hidden"></div>

    <script src="src/indexedDB.js"></script>
    <script src="card_cropper.js"></script>
</body>
</html>