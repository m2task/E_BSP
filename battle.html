<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>対戦画面</title>
  <link rel="stylesheet" href="battle.css">
</head>
<body>

<!-- 左カラム -->
<div class="column" style="position: relative;">
  <div style="display: flex; flex-direction: row; gap: 8px; align-items: flex-start;">
    <div class="zone" id="burstZone">
      <div class="zone-title">バースト</div>
      <div id="burstCard"></div>
    </div>
    <div class="zone special-zone" id="voidZone" style="min-width: 60px; min-height: 70px; margin-left: 13px; margin-top: -5px; position: relative; z-index: 2;">
      <div class="zone-title">ボイド</div>
      <div class="core-list" style="justify-content: center;">
        <div class="void-core" draggable="true" id="voidCore" style="background:#007bff; color:white; font-weight:bold; text-align:center; line-height:25px; user-select:none; cursor:grab;">∞</div>
      </div>
      <div id="voidToast" class="toast-message local"></div>
    </div>
  </div>
  <div class="zone" id="lifeZone">
    <div class="zone-title">ライフ</div>
    <div class="core-list core-container" id="lifeCores">
    </div>
    <div id="lifeToast" class="toast-message local"></div>
  </div>
  <div class="zone" id="reserveZone">
    <div class="zone-title">リザーブ</div>
    <div class="core-list core-container" id="reserveCores">
    </div>
    <div id="reserveToast" class="toast-message local"></div>
  </div>
</div>

<!-- 中央メインフィールド -->
<div class="main-field" id="fieldZone">
  <div class="zone-title">フィールド</div>
  <div class="cores" id="fieldCores"></div>
  <div class="field-cards" id="fieldCards"></div>
</div>

<!-- 右カラム -->
<div class="column">
  <div style="display: flex; flex-direction: column; align-items: center;">
    <div style="display: flex; align-items: center; gap: 0; position: relative; justify-content: center;">
      <div class="zone special-zone" id="deckCoreArea" style="position: absolute; left: -148px; top: -5px; min-width: 120px; min-height: 80px; z-index: 2;">
        <div style="display: flex; align-items: center; justify-content: space-between;">
          <div>
            <button id="addDeckCoreBtn" style="margin-right: 4px;">＋</button>
            <button id="toggleDeckCoreBtn">切替</button>
          </div>
        </div>
        <div id="countZone" class="core-list"></div>
        <div id="countCoreSummary" class="summary" style="font-size:12px; padding:4px; text-align:center;"></div>
      </div>
      <div class="zone-title" id="goToDeckRegisterButton" style="font-size: 15px;">デッキ登録画面へ</div>
    </div>
    <div class="deck-button" id="deckButton">
      デッキ
      <div class="deck-zone-overlay top-zone"></div>
      <div class="deck-zone-overlay bottom-zone"></div>
    </div>
  </div>
  <div class="deck-actions" style="display: flex; gap: 8px; justify-content: center; margin: 10px 0;">
    <button id="deckOpenBtn">オープン</button>
    <button id="deckDiscardBtn">破棄</button>
  </div>
  <div class="zone" id="trashZoneFrame" style="min-height: 190px;">
    <div class="zone-title" id="trashZoneTitle" style="cursor:pointer;">トラッシュ</div>
    <div id="trashCard"></div>
    <div id="trashListArea" style="display:none; margin-top:8px; flex-wrap:wrap; gap:8px;"></div>
    <div id="trashToast" class="toast-message local"></div>
  </div>
  <div id="refreshButton" class="zone-title" style="text-align: center; cursor: pointer; margin-top: 10px;">リフレッシュ</div>
</div>

<!-- 手札ゾーン -->
<div id="handZoneContainer" class="hand-zone-container">
  <div class="hand-toggle" id="handToggle">▼ 手札を閉じる</div>
  <button id="pinHandButton" class="pin-hand-button">固定</button>
  <div class="hand-zone" id="handZone"></div>
</div>
<div id="openHandButton" class="open-hand-toggle hidden">▲ 手札を開く（<span id="handCount">0</span>枚）</div>
<div id="deckGaiButton" class="open-deckgai-toggle">デッキ外</div>

<!-- トラッシュモーダル -->
<div id="trashModal">
  <div id="trashModalContent" style="display:flex; gap:8px;"></div>
</div>

<!-- デッキ外モーダル -->
<div id="deckGaiModal" class="modal-background" style="display: none;">
    <div class="modal-content" id="deckGaiModalContent" style="display:flex; gap:8px;">
        <div class="card special-card" draggable="true" data-card-type="token">
            <div class="card-name-fallback">トークン</div>
        </div>
        <div class="card special-card" draggable="true" data-card-type="tensei">
            <div class="card-name-fallback">転生後</div>
        </div>
    </div>
</div>

<div id="cardMoveToast" class="toast-message"></div>

<!-- オープンエリアモーダル -->
<div id="openAreaModal" class="modal-background" style="display: none;">
  <div class="modal-content" id="openAreaContent">
    <div id="openArea" class="open-area-zone"></div>
  </div>
</div>

<!-- コスト支払いモーダル -->
<div id="costModal" class="modal-background cost-modal-overlay" style="display: none;">
  <div class="modal-content">
    <div class="cost-grid" id="costGrid"></div>
  </div>
</div>


<script type="module" src="./battle.js"></script>
</body>
</html>